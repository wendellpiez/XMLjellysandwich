<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
     <title id="html_title">I Ching reading</title>
      <meta charset="utf-8"/>
     <link id="favicon" rel="icon" href="../sando1-icon.svg"/>
     <style type="text/css" id="xmljellysandwich_css">
        
        h1 { color: darkred }
        
        a { color: darkred; text-decoration: none }
        a:hover { text-decoration: underline }
        td { border: medium solid lightgreen; border-radius: 45%; background-color: cornsilk; width: 1.5em; height: 1.5em }
        
        #page_body   { border-top: medium groove black; padding-top: 1em; padding-bottom: 1em }
        #page_footer { border-top: medium groove black; margin-top:1em; padding-top: 1em }
        #page_footer > * { margin: 0.5em 0em }
        
        h1#page_title { font-size: 140%; margin-top: 1em }
        
        .link  { padding: 0.3em; border: thin solid black;
                 font-size: 90%; font-family: sans-serif; display: inline-block }
 
 
        .changing  { font-size: 90%; font-style: italic }
        
        h1 small { font-size: 60% }
        </style>
     <script type="text/javascript"
              src="../lib/Saxon-JS-2.2/SaxonJS2.rt.js"><!-- parsers are so easily confused --></script>
     <script>
        /*  http://www.saxonica.com/saxon-js/documentation/index.html#!api/transform */
function initiate(context9n,sticks) {
          SaxonJS.transform(
            { stylesheetLocation: "caststicks.sef.json",
              initialTemplate:    "cast",
              stylesheetParams: {
                "yarrowSequence": sticks,
                "framingText": context9n }
            },"asynch" );
          }

function castSticks() { 
           var Sticks = [6,7,7,7,7,7,7,7,8,8,8,8,8,9,9,9];
           var drawSticks = Array.from({length: 6}, () => Sticks[Math.floor(Math.random() * 16)] );
           return drawSticks.join(' ');
    }
  
  /* reads result off of pane, provides it to a download link and clicks it
     ad hoc anchor construction for the blob thanks to Nikita W */
    function acquireDownload(fileName) {
      var contents = document.getElementById("serialized-save").textContent;
      var f = new Blob([ contents ]);
      var a = document.createElement("a");
      a.href = URL.createObjectURL(f);
      a.type = "text/html;charset=utf-8";
      a.download = fileName;
      a.click()
      }
    </script>
      
   </head>
   <body>
      <div id="page_header">
        <h1 id="page_title"><i>I Ching</i> Reading</h1>
      </div>
     <div id="dashboard" style="position: absolute; right: 5%; top: 5%">
       <input size="37" id="framingInput" type="text" onchange="initiate(this.value,castSticks())" value="???"/>
       <span id="save-as"><!-- anchor here --></span>
     </div>
     <div id="page_body">
       <p>Enter a question or prompt.</p>
           <!-- <xsl:result-document href="#xmljellysandwich_body"> .... </xsl:result-document> -->
     </div>
     <div id="diagnostic"><!-- placeholder --></div>
     <div id="serialized-save" style="display:none"><!-- placeholder --></div>
     <div id="page_footer" style="font-size: smaller">
         <p>Reading produced by <a href="https://github.com/wendellpiez/XMLjellysandwich">XMLjellysandwich <i>I Ching</i></a> (Wendell Piez, 2019-2021).</p>
         <p>Dedicated to the teachers and transmitters, especially Thomas Cleary, <a href="http://ctext.org">CTP</a> and all open-source I Ching.</p>
       <p>See more projects produced by the <a href="https://wendellpiez.github.io/XMLjellysandwich/">XML Jelly Sandwich</a>.</p>
     </div>     
   </body>
  
</html>